# Visualization Comparison - Complete Documentation

## üìä Overview

This document provides a comprehensive explanation of all visualization plots generated by `Compare_viz_dataset.py`. Each plot compares HBO and Paramount streaming platforms using cleaned CSV data produced by the ETL pipeline.

---

## üìÅ File: `Notebooks/Compare_viz_dataset.py`

**Purpose**: Generates 6 comprehensive comparison visualizations between HBO and Paramount datasets.

**Input**: Cleaned CSV files (`hbo_clean.csv` and `paramount_clean.csv`)

**Output**: 6 PNG image files saved to project root directory

---

## üìà Plot 1: Titles by Release Year

### **Theoretical Explanation**

This plot visualizes the temporal distribution of content releases, showing how many titles each platform released per year over the last 30 years. It helps identify trends, growth patterns, and peak production periods for both platforms.

### **Code Logic & Methods**

```python
def titles_by_year(df):
    if "release_year" not in df.columns:
        return pd.Series(dtype=int)
    return df["release_year"].dropna().astype(int).value_counts().sort_index()
```

**Functions Used:**
- `pd.Series.value_counts()` - Counts occurrences of each year
- `dropna()` - Removes missing values
- `astype(int)` - Converts to integer
- `sort_index()` - Sorts years chronologically
- `pd.concat()` - Combines HBO and Paramount data
- `tail(30)` - Selects last 30 years
- `plot(kind="bar")` - Creates grouped bar chart

**Logic Flow:**
1. Extract release years from both datasets
2. Count titles per year for each platform
3. Combine into single DataFrame with aligned years
4. Filter out unwanted years (1912, 1913, 1914, 2023)
5. Select last 30 years for readability
6. Create grouped bar chart with side-by-side bars

### **What the Output Shows**

- **X-axis**: Release years (1993-2022, last 30 years)
- **Y-axis**: Count of titles released
- **Bars**: 
  - Blue bars = HBO titles
  - Orange bars = Paramount titles
- **Visual Pattern**: Shows which platform released more content in each year

### **What It Means**

- **Trend Analysis**: Identifies periods of high/low production
- **Platform Comparison**: Direct year-by-year comparison
- **Growth Patterns**: Shows if platforms are increasing or decreasing content production
- **Peak Years**: Highlights years with maximum content releases
- **Market Strategy**: Reveals production strategies over time

**Example Insights:**
- If HBO has taller bars in 2019-2021, it indicates HBO ramped up production during that period
- If Paramount shows consistent growth, it suggests a steady expansion strategy

---

## üìà Plot 2: Top Genres Comparison

### **Theoretical Explanation**

This visualization compares the most popular genres across both platforms. It shows which genres each platform focuses on, helping identify content strategy differences and genre preferences.

### **Code Logic & Methods**

```python
def top_genres(df, top_n=15):
    if "genres_array" not in df.columns:
        return pd.Series(dtype=int)
    exploded = df.explode("genres_array")
    exploded["genres_array"] = exploded["genres_array"].astype(str).str.strip()
    return exploded["genres_array"].value_counts().head(top_n)
```

**Functions Used:**
- `explode()` - Expands array/list column into multiple rows (one per genre)
- `astype(str)` - Converts to string for processing
- `str.strip()` - Removes whitespace
- `value_counts()` - Counts genre occurrences
- `head(top_n)` - Selects top N genres
- `pd.concat()` - Combines platforms
- `plot(kind="bar")` - Creates grouped bar chart

**Logic Flow:**
1. Parse `genres_array` column (handles comma-separated or array format)
2. Explode genres so each title-genre combination becomes a row
3. Count occurrences of each genre
4. Get top 20 genres from each platform
5. Combine and select top 15 for display
6. Create grouped bar chart

**Key Challenge Solved:**
- Handles genres stored as arrays: `['drama', 'comedy']`
- Handles comma-separated strings: `"drama, comedy"`
- Handles nested quotes and malformed data

### **What the Output Shows**

- **X-axis**: Genre names (e.g., Drama, Comedy, Action)
- **Y-axis**: Number of titles in that genre
- **Bars**:
  - Blue bars = HBO titles
  - Orange bars = Paramount titles
- **Top 15 Genres**: Shows most common genres across both platforms

### **What It Means**

- **Content Strategy**: Which genres each platform prioritizes
- **Market Positioning**: Genre focus differences between platforms
- **Audience Targeting**: What type of content each platform offers
- **Competitive Analysis**: Where platforms compete or differentiate

**Example Insights:**
- If HBO has more Drama titles, it suggests a focus on serious content
- If Paramount leads in Comedy, it indicates a lighter content strategy
- Similar heights suggest competitive overlap in popular genres

‚ÄúThe function top_genres explodes the genre list column so each genre becomes its own row. After cleaning the values, we use value_counts() to compute the most common genres. For both HBO and Paramount, we take the top genres, concatenate them side-by-side, fill missing combinations with zero, convert to integer type, and plot a grouped bar chart.‚Äù

---

## üìà Plot 3: Top Directors Comparison

### **Theoretical Explanation**

This plot compares the most prolific directors across both platforms. However, since director data is not included in the `titles.csv` files (it's in `credits.csv`), this plot either shows actual director data if available, or displays a placeholder message.

### **Code Logic & Methods**

```python
def top_directors(df, top_n=10):
    if "director" not in df.columns:
        return pd.Series(dtype=int)
    director_data = df["director"].fillna("").astype(str)
    non_empty = director_data[director_data != ""]
    if len(non_empty) == 0:
        return pd.Series(dtype=int)
    s = director_data.str.split(",").explode().str.strip()
    s = s[s != ""]
    return s.value_counts().head(top_n)
```

**Functions Used:**
- `fillna("")` - Replaces missing values with empty string
- `astype(str)` - Converts to string
- `str.split(",")` - Splits comma-separated director names
- `explode()` - Expands into multiple rows
- `str.strip()` - Removes whitespace
- `value_counts()` - Counts director occurrences
- `head(top_n)` - Selects top 10 directors

**Logic Flow:**
1. Check if "director" column exists
2. Filter out empty/null values
3. Split comma-separated director names
4. Count occurrences per director
5. Get top 10 directors
6. If no data: Create placeholder plot with message

**Error Handling:**
- Checks for column existence
- Handles empty data gracefully
- Creates informative placeholder if data unavailable

### **What the Output Shows**

**If Director Data Available:**
- **X-axis**: Director names
- **Y-axis**: Number of titles directed
- **Bars**: 
  - Blue = HBO directors
  - Orange = Paramount directors
- **Top 10 Directors**: Most prolific directors per platform

**If No Director Data:**
- Placeholder message: "Director data not available in titles.csv dataset"
- Explains that director info is in credits.csv files

### **What It Means**

- **Talent Relationships**: Which directors work with each platform
- **Content Quality Indicators**: Well-known directors may indicate quality content
- **Platform Preferences**: Which directors each platform collaborates with
- **Production Networks**: Shows industry connections

**Note**: Currently shows placeholder because director data requires joining with `credits.csv` files, which is not part of the current ETL pipeline.

---

## üìà Plot 4: Duration Distribution

### **Theoretical Explanation**

This visualization compares the runtime/duration distribution of content from both platforms. It shows whether platforms focus on shorter or longer content and helps identify content length preferences.

### **Code Logic & Methods**

```python
# Side-by-side histograms
fig, axes = plt.subplots(1, 2, figsize=(16, 6))
ax1.hist(hbo_durations, bins=30, alpha=0.7, color='#1f77b4', edgecolor='black')
ax2.hist(param_durations, bins=30, alpha=0.7, color='#ff7f0e', edgecolor='black')
```

**Functions Used:**
- `plt.subplots(1, 2)` - Creates 2 side-by-side subplots
- `hist()` - Creates histogram
- `bins=30` - Divides data into 30 bins
- `dropna()` - Removes missing duration values
- `alpha=0.7` - Sets transparency
- `edgecolor='black'` - Adds bar borders

**Logic Flow:**
1. Extract `duration_num` column (numeric duration in minutes)
2. Remove missing values
3. Create two separate histograms (one per platform)
4. Use 30 bins for smooth distribution
5. Display side-by-side for easy comparison

**Why Side-by-Side?**
- Prevents overlapping bars that obscure data
- Makes individual platform patterns clearly visible
- Easier to compare distributions

### **What the Output Shows**

**Left Subplot - HBO:**
- **X-axis**: Duration in minutes (0-350 minutes)
- **Y-axis**: Count of titles
- **Histogram**: Blue bars showing HBO content distribution

**Right Subplot - Paramount:**
- **X-axis**: Duration in minutes (0-350 minutes)
- **Y-axis**: Count of titles
- **Histogram**: Orange bars showing Paramount content distribution

### **What It Means**

- **Content Length Strategy**: Whether platforms favor short or long content
- **Peak Durations**: Most common content lengths (typically 90-120 minutes for movies)
- **Distribution Shape**: 
  - Normal distribution = consistent length standards
  - Multiple peaks = different content types (movies vs shows)
- **Platform Differences**: Which platform has longer/shorter average content

**Example Insights:**
- Peak around 90-100 minutes = typical movie length
- Peak around 30-60 minutes = TV show episodes
- Long tail = some very long content (mini-series, extended cuts)

---

## üìà Plot 5: Year-by-Year Comprehensive Comparison

### **Theoretical Explanation**

This is a comprehensive 2x2 subplot visualization that provides multiple perspectives on year-by-year comparison. It combines title counts, quality metrics (IMDB/TMDB scores), and genre distribution for a holistic view.

### **Code Logic & Methods**

```python
fig, axes = plt.subplots(2, 2, figsize=(16, 12))
# Subplot 1: Number of titles per year
# Subplot 2: Average IMDB Score per year
# Subplot 3: Average TMDB Score per year
# Subplot 4: Top genres for sample year
```

**Functions Used:**
- `plt.subplots(2, 2)` - Creates 2x2 grid of subplots
- `isin(common_years)` - Filters to years present in both datasets
- `groupby("release_year")` - Groups data by year
- `.mean()` - Calculates average scores
- `value_counts()` - Counts titles per year
- `plot(kind="bar")` - Bar charts
- `plot()` with markers - Line charts
- `explode()` - Expands genre arrays

**Logic Flow:**

**Subplot 1 - Title Counts:**
1. Filter to common years (years in both datasets)
2. Count titles per year for each platform
3. Align years and fill missing with 0
4. Limit to last 30 years for readability
5. Create side-by-side grouped bars

**Subplot 2 - IMDB Scores:**
1. Group by release year
2. Calculate mean IMDB score per year
3. Align years between platforms
4. Create line chart with markers

**Subplot 3 - TMDB Scores:**
1. Same as Subplot 2 but for TMDB scores
2. Shows alternative quality metric

**Subplot 4 - Genre Distribution:**
1. Select most recent common year
2. Extract genres for that year
3. Count genre occurrences
4. Create grouped bar chart

### **What the Output Shows**

**Top-Left: Number of Titles Released per Year**
- **X-axis**: Release years (last 30 years)
- **Y-axis**: Number of titles
- **Bars**: Side-by-side comparison (HBO blue, Paramount orange)
- **Shows**: Production volume trends

**Top-Right: Average IMDB Score per Year**
- **X-axis**: Release years
- **Y-axis**: Average IMDB score (0-10 scale)
- **Lines**: 
  - Blue line with circles = HBO
  - Orange line with squares = Paramount
- **Shows**: Quality trends over time

**Bottom-Left: Average TMDB Score per Year**
- **X-axis**: Release years
- **Y-axis**: Average TMDB score (0-10 scale)
- **Lines**: Same format as IMDB plot
- **Shows**: Alternative quality metric

**Bottom-Right: Top Genres in [Year]**
- **X-axis**: Genre names
- **Y-axis**: Number of titles
- **Bars**: Side-by-side (HBO blue, Paramount orange)
- **Shows**: Genre focus for most recent common year

### **What It Means**

**Comprehensive Analysis:**
- **Volume vs Quality**: Compare production quantity with quality scores
- **Trend Identification**: See if quality improves/declines with volume
- **Platform Strategy**: Understand if platforms prioritize quantity or quality
- **Year-Specific Insights**: Genre focus in recent years

**Example Insights:**
- High volume + high scores = successful content strategy
- Increasing scores over time = improving content quality
- Genre distribution shows current content focus
- Score differences indicate quality perception gaps

---

## üìà Plot 6: Production Countries by Type (MOVIE vs SHOW)

### **Theoretical Explanation**

This plot analyzes which countries produce content for each platform, broken down by content type (MOVIE vs SHOW). It reveals geographic production patterns and shows whether platforms source content globally or focus on specific regions.

### **Code Logic & Methods**

```python
def get_countries_by_type(df, platform_name):
    # Parse production_countries
    def parse_countries(cell):
        # Handles array format: ['US', 'GB']
        # Handles string format: "US, GB"
        # Returns list of country codes
    
    df_copy["countries_list"] = df_copy["production_countries"].apply(parse_countries)
    exploded = df_copy.explode("countries_list")
    result = exploded.groupby(["countries_list", "type"]).size().reset_index(name="count")
```

**Functions Used:**
- `ast.literal_eval()` - Safely evaluates string representations of arrays
- `str.split(",")` - Splits comma-separated country codes
- `explode()` - Expands country arrays into multiple rows
- `groupby(["countries_list", "type"])` - Groups by country and content type
- `.size()` - Counts titles per group
- `pivot_table()` - Creates cross-tabulation
- `nlargest(15)` - Selects top 15 countries

**Logic Flow:**
1. Parse `production_countries` column (handles multiple formats)
2. Explode countries so multi-country productions become multiple rows
3. Group by country and type (MOVIE/SHOW)
4. Count titles per country-type combination
5. Get top 15 countries by total count
6. Create pivot table: countries √ó (platform, type)
7. Generate grouped bar chart with 4 bars per country

**Data Parsing Challenge:**
- Handles: `['US']`, `['US', 'GB']`, `"US, GB"`, `"['US']"`
- Cleans quotes and brackets
- Handles empty/null values

### **What the Output Shows**

- **X-axis**: Top 15 production countries (e.g., US, GB, CA, FR)
- **Y-axis**: Number of titles produced
- **4 Bars per Country**:
  - **HBO - MOVIE** (dark blue)
  - **HBO - SHOW** (light blue)
  - **Paramount - MOVIE** (dark orange)
  - **Paramount - SHOW** (light orange)

### **What It Means**

- **Geographic Strategy**: Which countries each platform sources content from
- **Content Type Distribution**: Whether countries produce more movies or shows
- **Global vs Local**: Extent of international content sourcing
- **Production Hubs**: Identifies major content production countries
- **Platform Preferences**: Which platforms work with which countries

**Example Insights:**
- US dominance = focus on domestic content
- Multiple countries = global content strategy
- MOVIE vs SHOW differences = country-specific production capabilities
- Platform differences = different international partnerships

**Country Code Examples:**
- US = United States
- GB = United Kingdom
- CA = Canada
- FR = France
- DE = Germany

---

## üîß Common Functions & Methods Used Across All Plots

### **Pandas Functions**
- `pd.read_csv()` - Reads CSV files with error handling
- `pd.concat()` - Combines DataFrames
- `fillna()` - Handles missing values
- `dropna()` - Removes null values
- `astype()` - Type conversion
- `value_counts()` - Counts value occurrences
- `groupby()` - Groups data for aggregation
- `explode()` - Expands list/array columns
- `pivot_table()` - Creates cross-tabulations

### **Matplotlib Functions**
- `plt.figure()` - Creates new figure
- `plt.subplots()` - Creates subplot grids
- `plot(kind="bar")` - Bar charts
- `plot()` - Line charts
- `hist()` - Histograms
- `savefig()` - Saves plots to file
- `show()` - Displays plots
- `tight_layout()` - Adjusts spacing
- `set_title()`, `set_xlabel()`, `set_ylabel()` - Labels

### **Data Processing Logic**
- **Array Parsing**: Handles multiple data formats (arrays, strings, nested quotes)
- **Error Handling**: Graceful handling of missing data
- **Data Alignment**: Ensures consistent year/category alignment
- **Filtering**: Removes unwanted data (specific years, empty values)
- **Aggregation**: Counts, means, sums for comparisons

---

## üìä Output Files Generated

All plots are saved as PNG files in the project root directory:

1. `titles_by_year.png` - Plot 1
2. `top_genres.png` - Plot 2
3. `top_directors.png` - Plot 3
4. `duration_distribution.png` - Plot 4
5. `year_by_year_comparison.png` - Plot 5
6. `production_countries_by_type.png` - Plot 6

---

## üéØ Key Insights These Visualizations Provide

### **Business Intelligence**
- Content production trends over time
- Genre strategy and market positioning
- Quality metrics and audience reception
- Geographic content sourcing patterns

### **Comparative Analysis**
- Direct platform-to-platform comparisons
- Identification of competitive advantages
- Market share indicators
- Strategic differences

### **Data-Driven Decisions**
- Which content types perform well
- Which genres to invest in
- Which countries to source from
- Quality vs quantity balance

---

## üîç Technical Details

### **Data Requirements**
- Cleaned CSV files from ETL pipeline
- Required columns: `release_year`, `genres_array`, `type`, `duration_num`, `production_countries`, `imdb_score`, `tmdb_score`
- Optional: `director` (if available)

### **Error Handling**
- Missing columns: Returns empty Series/DataFrame
- Missing data: Uses `fillna()` and `dropna()`
- Malformed data: Multiple parsing strategies with fallbacks
- Empty results: Creates placeholder plots or informative messages

### **Performance Considerations**
- Uses efficient pandas operations
- Limits data to relevant subsets (top N, last 30 years)
- Handles large datasets through aggregation before plotting

---

## üìù Summary

These 6 visualizations provide a comprehensive view of HBO vs Paramount content libraries, covering:
- **Temporal trends** (release years)
- **Content categorization** (genres, types)
- **Quality metrics** (IMDB/TMDB scores)
- **Content characteristics** (duration)
- **Geographic patterns** (production countries)
- **Comprehensive year analysis** (multi-metric comparison)

Each plot uses robust data processing, handles edge cases, and provides clear, actionable insights for understanding platform strategies and content libraries.

---

**Created for**: Interview and Presentation  
**Date**: 2025  
**Technology Stack**: Python, Pandas, Matplotlib, Seaborn

